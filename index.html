<!DOCTYPE html>
<html lang="ko">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
</head>

<body>

  <script>
    function test(delay, callback) {
      setTimeout(() => {
        callback();
      }, delay)
    }

    // 수행할 미션 - start, 2초 뒤에 test1 콘솔, 다시 2초 뒤에 test2 콘솔 찍히고, 마지막으로 end 출력
    // 애초에 동기화시키고 싶은 코드를 모두 callback 형태로 묶어 통째로 web api에게 넘김으로써 callstack 입장에서 다음에 실행할 코드들을 원천적으로 제거하는 방법 

    // 순서 1 - start 출력 (callstack)
    console.log('start');

    // 순서 2 - 첫 번째 test 함수 호출 (callstack)
    // 순서 3 - setTimeout을 web api에게 전달 (callstack)
    test(2000, () => {

      // * 기존의 test1 콘솔문이랑
      // 순서 4 - setTimeout 호출하고, 그 안쪽의 구문을 다시 callstack에 전달 (web api)
      // 순서 5 - web api로부터 setTimeout 안쪽의 callback 함수를 전달받고 호출 (callstack)
      console.log('test1');
      // * 동기화 호출하고자 하는 두 번째 test 함수도 같이 callback에 묶어서 인수로 전달
      // 순서 6 - 다시 두 번째 test 함수 호출하고, 안쪽의 setTimeout을 다시 web api에게 전달 (callstack)
      test(2000, () => {
        // 순서 7 - setTimeout을 수행하고, 아래쪽의 callback 함수로 전달된 구문을 다시 callstack에게 전달 (web api)
        // 순서 8 - 아래 구문을 실행하고 종료 (callstack)
        console.log('test2');
        console.log('end');
      });
    })



  </script>

</body>

</html>